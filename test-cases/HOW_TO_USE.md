# テストケースファイルの使い方

## 概要

このフォルダには、サンプルサイトのテストケースがテキストファイル形式で整理されています。
MCPツール（Playwright Agent Mode、Playwright MCP、Chrome DevTools MCP）にこのファイルを参照させることで、自動テストを実行できます。

## ファイル一覧

```
test-cases/
├── HOW_TO_USE.md                      # このファイル（使い方ガイド）
├── boundary-value-testcases.txt       # 境界値テストケース（7件）
├── form-validation-testcases.txt      # フォーム入力テストケース（22件）
└── pagination-testcases.txt           # ページングテストケース（準備中）
```

## MCPツールへの指示方法

### パターン1: ファイル全体を参照して実行

```
Playwright Agent Modeを使用してください。

test-cases/boundary-value-testcases.txt に記載されている
すべてのテストケースを実行してください。

各テストケースについて:
1. テストコードを生成
2. 実行
3. 結果をレポート

形式:
- TC_BV_001: 成功/失敗
- TC_BV_002: 成功/失敗
...

失敗したテストケースについては、詳細なエラー情報を含めてください。
```

### パターン2: 特定のテストケースのみ実行

```
Playwright MCPを使用してください。

test-cases/boundary-value-testcases.txt の
TC_BV_005（データ21件追加後の状態）を実行してください。

ファイルに記載されている手順に従って:
1. 操作手順を実行
2. 確認項目をすべてチェック
3. スクリーンショットを取得
4. 結果をレポート
```

### パターン3: 複数のテストケースを範囲指定

```
Playwright Agent Modeを使用してください。

test-cases/form-validation-testcases.txt の
TC_FV_012〜TC_FV_017（年齢フィールドの境界値テスト）を実行してください。

各境界値（-1, 0, 1, 149, 150, 151）について:
- バリデーション動作を確認
- エラーメッセージの内容を確認
- データ追加の成否を確認

結果を表形式でまとめてください。
```

### パターン4: カテゴリ別に実行

```
以下のテストファイルを参照して、カテゴリ別にテストを実行してください:

1. 境界値テスト
   - ファイル: test-cases/boundary-value-testcases.txt
   - Playwright Agent Modeで実行

2. フォーム入力テスト
   - ファイル: test-cases/form-validation-testcases.txt
   - Playwright MCPで実行

各カテゴリの実行結果をまとめて、
統合レポートを作成してください。
```

## 具体的な指示例

### 例1: 境界値テストを順番に実行

```
Playwright Agent Modeを使用してください。

タスク: 境界値テストの実行

参照ファイル: test-cases/boundary-value-testcases.txt

実行順序:
1. TC_BV_001: データ0件の状態
2. TC_BV_002: データ1件追加後の状態
3. TC_BV_003: データ19件追加後の状態
4. TC_BV_004: データ20件追加後の状態（境界値）
5. TC_BV_005: データ21件追加後の状態（境界値超え）
6. TC_BV_006: データ40件追加後の状態
7. TC_BV_007: データ41件追加後の状態

各テストケースについて:
- ファイルの「操作手順」に従って操作
- ファイルの「確認項目」をすべてチェック
- 成功/失敗を記録
- スクリーンショットを取得

最終レポート形式:
| TC番号 | テスト名 | 結果 | 備考 |
|--------|---------|------|------|
| TC_BV_001 | データ0件 | ✅ | - |
| TC_BV_002 | データ1件 | ✅ | - |
...
```

### 例2: フォーム入力テストの境界値のみ

```
Playwright MCPを使用してください。

タスク: 年齢フィールドの境界値テスト

参照ファイル: test-cases/form-validation-testcases.txt

対象テストケース:
- TC_FV_012: 年齢 = -1（最小値の下）
- TC_FV_013: 年齢 = 0（最小値）
- TC_FV_014: 年齢 = 1（最小値の上）
- TC_FV_015: 年齢 = 149（最大値の下）
- TC_FV_016: 年齢 = 150（最大値）
- TC_FV_017: 年齢 = 151（最大値の上）

URL: http://127.0.0.1:5500/sample-site/index.html

各テストケースで:
1. ファイルの「操作手順」に従って実行
2. ファイルの「確認項目」をチェック
3. エラーメッセージの内容を記録
4. スクリーンショット取得

結果レポート:
| 年齢 | エラー有無 | エラーメッセージ | データ追加 |
|------|-----------|----------------|-----------|
| -1   | ✅        | "0以上"       | ❌        |
| 0    | ❌        | -             | ✅        |
...
```

### 例3: パフォーマンス測定と組み合わせ

```
Chrome DevTools MCPとPlaywright Agent Modeを組み合わせて使用してください。

タスク: 境界値でのパフォーマンス比較

参照ファイル: test-cases/boundary-value-testcases.txt

手順:
1. Playwright Agent Modeで各境界値のテストケースを実行
   - TC_BV_001: 0件
   - TC_BV_004: 20件
   - TC_BV_005: 21件
   - TC_BV_007: 41件

2. 各テストケース実行時に、Chrome DevTools MCPでパフォーマンス測定
   - メモリ使用量
   - DOM要素数
   - レンダリング時間

3. 結果を比較表にまとめる

レポート形式:
| 件数 | メモリ(MB) | DOM要素数 | レンダリング(ms) | テスト結果 |
|------|-----------|----------|----------------|-----------|
| 0    | X.XX      | XXX      | XXX            | ✅        |
| 20   | X.XX      | XXX      | XXX            | ✅        |
...
```

## テストケースファイルの読み方

### ファイル構造

```
# テストケースタイトル

## 対象URL
[テスト対象のURL]

## テストケース一覧

### TC_XXX_NNN: テストケース名
【前提条件】
- 前提となる状態

【操作手順】
1. 操作1
2. 操作2
...

【確認項目】
1. 確認内容1
   - セレクタ: [CSS セレクタ]
   - 期待値: [期待される値]

2. 確認内容2
   - セレクタ: [CSS セレクタ]
   - 期待値: [期待される値]
```

### テストケース番号の命名規則

- **TC_BV_NNN**: 境界値テスト (Boundary Value)
- **TC_FV_NNN**: フォーム入力テスト (Form Validation)
- **TC_PG_NNN**: ページングテスト (Paging)

### セレクタの表記

すべてのセレクタはCSS形式で記載されています:
- `#id` : ID セレクタ
- `.class` : クラス セレクタ
- `element` : 要素 セレクタ
- `parent child` : 子孫 セレクタ
- `:first-child`, `:last-child` : 疑似クラス

## テストケースのカスタマイズ

### 待機時間の調整

テストケースファイルには推奨の待機時間が記載されていますが、環境に応じて調整してください:

```
【指示例】
test-cases/boundary-value-testcases.txt のTC_BV_005を実行してください。

ただし、各データ追加後の待機時間を100msから200msに変更してください。
```

### データの変更

テストデータをカスタマイズする場合:

```
【指示例】
test-cases/form-validation-testcases.txt のTC_FV_021を実行してください。

ただし、以下のデータを使用してください:
- 名前: 「佐藤花子」
- メール: 「sato@example.com」
- 年齢: 35
- 部署: 営業
```

### 確認項目の追加

標準の確認項目に加えて、追加のチェックを行う場合:

```
【指示例】
test-cases/boundary-value-testcases.txt のTC_BV_005を実行してください。

ファイルの確認項目に加えて、以下も確認してください:
- 追加ボタンが有効であること
- 成功メッセージが表示されること
- ブラウザのコンソールにエラーがないこと
```

## トラブルシューティング

### テストケースが見つからない

```
【問題】
指定したテストケース番号が見つからない

【対処】
ファイルを開いて、テストケース番号を確認してください。
TC_BV_001〜TC_BV_007、TC_FV_001〜TC_FV_022が定義されています。
```

### 期待値と異なる結果

```
【問題】
テストケースの期待値と実際の結果が異なる

【対処】
1. サンプルサイトが起動しているか確認
2. URLが正しいか確認（http://127.0.0.1:5500/sample-site/index.html）
3. ブラウザのキャッシュをクリア
4. ページをリロード
```

### セレクタが見つからない

```
【問題】
テストケースに記載されているセレクタが見つからない

【対処】
ファイル末尾の「セレクタ一覧」セクションを確認してください。
すべてのセレクタが一覧化されています。
```

## ベストプラクティス

### 1. 順序を守る

境界値テストは順序が重要です（特にデータ件数の増加）:
```
推奨: TC_BV_001 → TC_BV_002 → TC_BV_003 → ...
非推奨: TC_BV_007 → TC_BV_001 → TC_BV_005（ランダム）
```

### 2. クリーンな状態から開始

各テストケースは、できればクリーンな状態（ページリロード）から開始:
```
【推奨される指示】
各テストケースの前にページをリロードしてください。
```

### 3. スクリーンショットの活用

境界値の重要なポイントでスクリーンショットを取得:
```
【推奨される指示】
TC_BV_004（20件）とTC_BV_005（21件）で
ページングの表示/非表示の違いがわかるスクリーンショットを取得してください。
```

### 4. エラー時の詳細記録

テストが失敗した場合、詳細な情報を記録:
```
【推奨される指示】
テストが失敗した場合:
- スクリーンショットを取得
- ブラウザのコンソールログを取得
- DOM の状態をダンプ
- 実際の値と期待値を比較
```

## 統合指示の例

### 完全なテスト実行

```
【タスク】サンプルサイトの包括的なテストを実行

使用ツール:
- Playwright Agent Mode
- Chrome DevTools MCP

手順:

## フェーズ1: 境界値テスト
参照: test-cases/boundary-value-testcases.txt
- TC_BV_001〜TC_BV_007をすべて実行
- 各テストで Chrome DevTools MCP でパフォーマンス測定
- スクリーンショット取得

## フェーズ2: フォーム入力テスト
参照: test-cases/form-validation-testcases.txt
- TC_FV_001〜TC_FV_022をすべて実行
- バリデーションエラーのスクリーンショット取得
- エラーメッセージの内容を記録

## フェーズ3: 統合レポート作成
以下を含む統合レポートを作成:
1. 実行サマリー（成功/失敗数）
2. 失敗したテストケースの詳細
3. パフォーマンスデータの比較表
4. 発見された問題点
5. 改善提案

レポート形式: Markdown
```

---

**最終更新**: 2025年10月25日
